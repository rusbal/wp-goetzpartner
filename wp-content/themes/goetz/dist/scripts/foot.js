jQuery(document).ready(function(t){function e(t){t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()}function a(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}t.fn.exists=function(){return t(this).length>0},t.fn.loaded=function(e,i,a){var s=this.length;return s>0?this.each(function(){var a=this,o=t(a);o.on("load.dt",function(a){t(this).off("load.dt"),"function"==typeof e&&e.call(this),--s<=0&&"function"==typeof i&&i.call(this)}),a.complete&&void 0!==a.complete?o.trigger("load.dt"):a.src=a.src}):a?("function"==typeof i&&i.call(this),this):void 0};var s=t("body"),o=t(window),r=t("#main-slideshow");t(".three-d-slider"),t("#wpadminbar").height(),t(".masthead:not(.side-header):not(.side-header-v-stroke)").height();if(s.hasClass("transparent"));else if(s.hasClass("overlap")){t(".masthead:not(.side-header):not(.side-header-v-stroke)").height()+(parseInt(r.css("marginTop"))+parseInt(r.css("marginBottom")))}else{t(".masthead:not(.side-header):not(.side-header-v-stroke)").height()}t.HoverDir=function(e,i){this.$el=t(i),this._init(e)},t.HoverDir.defaults={speed:300,easing:"ease",hoverDelay:0,inverse:!1},t.HoverDir.prototype={_init:function(e){this.options=t.extend(!0,{},t.HoverDir.defaults,e),this.transitionProp="all "+this.options.speed+"ms "+this.options.easing,this.support=Modernizr.csstransitions,this._loadEvents()},_loadEvents:function(){var e=this;this.$el.on("mouseenter.hoverdir, mouseleave.hoverdir",function(i){var a=t(this),s=a.find(".rollover-content"),o=e._getDir(a,{x:i.pageX,y:i.pageY}),r=e._getStyle(o);"mouseenter"===i.type?(s.hide().css(r.from),clearTimeout(e.tmhover),e.tmhover=setTimeout(function(){s.show(0,function(){var i=t(this);e.support&&i.css("transition",e.transitionProp),e._applyAnimation(i,r.to,e.options.speed)})},e.options.hoverDelay)):(e.support&&s.css("transition",e.transitionProp),clearTimeout(e.tmhover),e._applyAnimation(s,r.from,e.options.speed))})},_getDir:function(t,e){var i=t.width(),a=t.height(),s=(e.x-t.offset().left-i/2)*(i>a?a/i:1),o=(e.y-t.offset().top-a/2)*(a>i?i/a:1),r=Math.round((Math.atan2(o,s)*(180/Math.PI)+180)/90+3)%4;return r},_getStyle:function(t){var e,i,a={left:"0px",top:"-100%"},s={left:"0px",top:"100%"},o={left:"-100%",top:"0px"},r={left:"100%",top:"0px"},n={top:"0px"},l={left:"0px"};switch(t){case 0:e=this.options.inverse?s:a,i=n;break;case 1:e=this.options.inverse?o:r,i=l;break;case 2:e=this.options.inverse?a:s,i=n;break;case 3:e=this.options.inverse?r:o,i=l}return{from:e,to:i}},_applyAnimation:function(e,i,a){t.fn.applyStyle=this.support?t.fn.css:t.fn.animate,e.stop().applyStyle(i,t.extend(!0,[],{duration:a+"ms"}))}};var n=function(t){window.console&&window.console.error(t)};t.fn.hoverdir=function(e){var i=t.data(this,"hoverdir");if("string"==typeof e){var a=Array.prototype.slice.call(arguments,1);this.each(function(){return i?t.isFunction(i[e])&&"_"!==e.charAt(0)?void i[e].apply(i,a):void n("no such method '"+e+"' for hoverdir instance"):void n("cannot call methods on hoverdir prior to initialization; attempted to call method '"+e+"'")})}else this.each(function(){i?i._init():i=t.data(this,"hoverdir",new t.HoverDir(e,this))});return i},t(".mobile-false .hover-grid .rollover-project").each(function(){t(this).hoverdir()}),t(".mobile-false .hover-grid-reverse .rollover-project ").each(function(){t(this).hoverdir({inverse:!0})}),t.fn.hoverLinks=function(){if(t(".semitransparent-portfolio-icons").length>0||t(".accent-portfolio-icons").length>0)return this.each(function(){var e=t(this);e.hasClass("height-ready")||(t("<span/>").appendTo(t(this)),e.on({mouseenter:function(){if(0===t(this).children("span").length){var e=t("<span/>").appendTo(t(this));setTimeout(function(){e.addClass("icon-hover")},20)}else t(this).children("span").addClass("icon-hover")},mouseleave:function(){t(this).children("span").removeClass("icon-hover")}}),e.addClass("height-ready"))})},t(".links-container a").hoverLinks(),t.fn.forwardToPost=function(){return this.each(function(){var e=t(this);e.hasClass("this-ready")||(e.on("click",function(){if(!e.parents(".ts-wrap").hasClass("ts-interceptClicks"))return window.location.href=e.find("a").first().attr("href"),!1}),e.addClass("this-ready"))})},t(".mobile-false .rollover-project.forward-post").forwardToPost(),t.fn.touchforwardToPost=function(){return this.each(function(){var e=t(this);if(!e.hasClass("touch-hover-ready")){s.on("touchend",function(e){t(".mobile-true .rollover-content").removeClass("is-clicked"),t(".mobile-true .rollover-project").removeClass("is-clicked")});var e=t(this).find(".rollover-content");e.on("touchstart",function(t){origY=t.originalEvent.touches[0].pageY,origX=t.originalEvent.touches[0].pageX}),e.on("touchend",function(i){var a=i.originalEvent.changedTouches[0].pageX,s=i.originalEvent.changedTouches[0].pageY;if(origY==s||origX==a){if(!e.hasClass("is-clicked"))return i.preventDefault(),t(".mobile-ture .rollover-content").removeClass("is-clicked"),t(".mobile-true .rollover-project").removeClass("is-clicked"),e.addClass("is-clicked"),e.parent(".rollover-project").addClass("is-clicked"),!1;window.location.href=e.prev("a").first().attr("href")}}),e.addClass("touch-hover-ready")}})},t(".mobile-true .rollover-project.forward-post").touchforwardToPost(),t.fn.followCurentLink=function(){return this.each(function(){var e=t(this);if(!e.hasClass("this-ready")){var i=e.find(".links-container > a"),a=e.find(".portfolio-categories a");e.on("click",function(){if(!e.parents(".ts-wrap").hasClass("ts-interceptClicks"))return i.each(function(){$thisTarget=t(this).attr("target")?t(this).attr("target"):"_self"}),i.hasClass("project-details")||i.hasClass("link")||i.hasClass("project-link")?(window.open(i.attr("href"),$thisTarget),!1):(i.trigger("click"),!1)}),e.find(a).click(function(t){t.stopPropagation(),window.location.href=a.attr("href")}),e.addClass("this-ready")}})},t(".mobile-false .rollover-project.rollover-active, .mobile-false .buttons-on-img.rollover-active").followCurentLink(),t.fn.touchHoverImage=function(){return this.each(function(){var e=t(this);if(!e.hasClass("hover-ready")){s.on("touchend",function(e){t(".mobile-true .rollover-content").removeClass("is-clicked")});var i=t(this).find(".rollover-content");i.parents(".wf-cell");i.on("touchstart",function(t){origY=t.originalEvent.touches[0].pageY,origX=t.originalEvent.touches[0].pageX}),i.on("touchend",function(e){var a=e.originalEvent.changedTouches[0].pageX,s=e.originalEvent.changedTouches[0].pageY;if((origY==s||origX==a)&&!i.hasClass("is-clicked"))return t(".links-container > a",i).on("touchend",function(t){t.stopPropagation(),i.addClass("is-clicked")}),e.preventDefault(),t(".mobile-true .buttons-on-img .rollover-content").removeClass("is-clicked"),i.addClass("is-clicked"),!1}),e.addClass("hover-ready")}})},t(".mobile-true .buttons-on-img").touchHoverImage(),t.fn.touchScrollerImage=function(){return this.each(function(){var e=t(this);if(!e.hasClass("hover-ready")){s.on("touchend",function(e){t(".mobile-true .project-list-media").removeClass("is-clicked")});var i=t(this),a=i.find("a.rollover-click-target").first(),o=i.find(".links-container");i.on("touchstart",function(t){origY=t.originalEvent.touches[0].pageY,origX=t.originalEvent.touches[0].pageX}),i.on("touchend",function(e){var s=e.originalEvent.changedTouches[0].pageX,r=e.originalEvent.changedTouches[0].pageY;if(!i.parents(".ts-wrap").hasClass("ts-interceptClicks"))return origY!=r&&origX!=s||i.hasClass("is-clicked")?void 0:(a.length>0&&(a.on("click",function(e){e.stopPropagation(),t(this).hasClass("go-to")&&(window.location.href=t(this).attr("href"))}),a.trigger("click")),o.length>0&&o.find(" > a ").each(function(){t(this).on("touchend",function(e){e.stopPropagation(),t(this).trigger("click")})}),e.preventDefault(),t(".mobile-true .fs-entry").removeClass("is-clicked"),i.addClass("is-clicked"),!1)}),e.addClass("hover-ready")}})},t(".mobile-true .project-list-media").touchScrollerImage(),t.fn.touchHoverLinks=function(){return this.each(function(){var e=t(this);if(!e.hasClass("hover-ready")){var i=t(this);i.on("touchend",function(e){if(!i.parents(".ts-wrap").hasClass("ts-interceptClicks"))return i.hasClass("is-clicked")?void 0:i.hasClass("project-zoom")?(i.trigger("click"),t(".mobile-true .links-container > a").removeClass("is-clicked"),i.addClass("is-clicked"),!1):(window.location.href=i.attr("href"),!1)}),e.addClass("hover-ready")}})},t(".mobile-true .fs-entry .links-container > a").touchHoverLinks(),t.fn.triggerAlbumsClick=function(){return this.each(function(){var e=t(this);if(!e.hasClass("this-ready")){var i=e.find("a.rollover-click-target, .dt-mfp-item").first(),a=e.find(".portfolio-categories a");if(i.length>0){i.on("click",function(e){e.preventDefault(),e.stopPropagation(),i.parents(".ts-wrap").hasClass("ts-interceptClicks")||t(this).hasClass("go-to")&&(window.location.href=t(this).attr("href"))});var s=!1;e.on("click",function(){if(!e.parents(".ts-wrap").hasClass("ts-interceptClicks"))return s||(s=!0,i.trigger("click"),s=!1),!1}),e.find(a).click(function(t){t.stopPropagation(),window.location.href=a.attr("href")})}e.addClass("this-ready")}})},t(".dt-albums-template .rollover-project, .dt-albums-shortcode .rollover-project, .dt-albums-template .buttons-on-img, .dt-albums-shortcode .buttons-on-img, .archive .type-dt_gallery .buttons-on-img").triggerAlbumsClick(),t.fn.triggerHoverClick=function(){return this.each(function(){var e=t(this);if(!e.hasClass("click-ready")){var i,a=e.prev("a:not(.dt-single-mfp-popup):not(.dt-mfp-item)").first(),s=e.find(".portfolio-categories a"),o=e.find(".project-link"),r=o.attr("target")?o.attr("target"):"_self";if(a.length>0){var n=!1;e.on("click",function(s){if(!e.parents(".ts-wrap").hasClass("ts-interceptClicks"))return i=t(".semitransparent-portfolio-icons").length>0||t(".accent-portfolio-icons").length>0?t(s.target).parent():t(s.target),i.hasClass("project-zoom")?t(this).find("a.dt-gallery-mfp-popup, .dt-trigger-first-mfp, .dt-single-mfp-popup, .dt-mfp-item").first().trigger("click"):n||(n=!0,a.trigger("click"),window.location.href=a.attr("href"),n=!1),!1}),e.find(o).click(function(t){t.stopPropagation(),t.preventDefault(),window.open(o.attr("href"),r)}),e.find(s).click(function(t){t.stopPropagation(),window.location.href=s.attr("href")})}e.addClass("click-ready")}})},t(".mobile-false .rollover-project:not(.rollover-active) .rollover-content, .buttons-on-img:not(.rollover-active) .rollover-content").triggerHoverClick(),t.fn.smartGrid=function(){return this.each(function(){for(var e=t(this),i=parseInt(e.attr("data-columns")),a=parseInt(e.attr("data-width")),s=e.width();Math.floor(s/i)<a&&(i--,!(i<=1)););t("> .wf-cell",e).css({width:(100/i).toFixed(6)+"%",display:"inline-block"})})};var l=t(".benefits-grid, .logos-grid");l.smartGrid(),o.on("debouncedresize",function(){l.smartGrid()});var d=t(".photo-scroller");if(d.length>0&&(t.fn.photoSlider=function(){function e(t){"37"==t.keyCode?I.noSlide||I.slidePrev():"39"==t.keyCode&&(I.noSlide||I.slideNext())}var a=t(this),r={},n="";$elParent=a.parents(".photo-scroller"),r.$items=a.children("figure"),r.count=r.$items.length,r.$items.each(function(e){var i=t(this),a=i.children().first().remove(),s=a.attr("href"),o=a.children("img"),r=o.attr("src"),l=o.attr("data-src"),d=(o.attr("data-srcset"),o.attr("class"));if(o.hasClass("lazy-load"))var p="layzr-bg";else var p="";i.find("figcaption").addClass("caption-"+(e+1));var c=t(this).find("figcaption").clone(!0);if(t(".slide-caption").append(c),parseInt($elParent.attr("data-thumb-width"))>0){var h=parseInt($elParent.attr("data-thumb-width")),g=parseInt($elParent.attr("data-thumb-height"));$elParent.removeClass("proportional-thumbs")}else{var h=parseInt(o.attr("width")),g=parseInt(o.attr("height"));$elParent.addClass("proportional-thumbs")}n=n+'<div class="ts-cell" data-width="'+(h+5)+'" data-height="'+(g+10)+'"><div class="ts-thumb-img '+p+'"><img class=" '+d+'" src="'+r+'" data-src="'+l+'" data-srcset="'+l+'" width="'+h+'" height="'+g+'"></div></div>',i.prepend('<div class="ts-slide-img"><img src="'+s+'" width="'+i.attr("data-width")+'" height="'+i.attr("data-height")+'"></div>')}),$elParent.append('<div class="scroller-arrow prev"><i></i><i></i></div><div class="scroller-arrow next"><i></i><i></i></div>'),a.addClass("ts-cont"),a.wrap('<div class="ts-wrap"><div class="ts-viewport"></div></div>');var l=a.parents(".ts-wrap"),d=o.width(),p=$elParent,c="true"==p.attr("data-autoslide"),h=p.attr("data-delay")&&parseInt(p.attr("data-delay"))>999?parseInt(p.attr("data-delay")):5e3,g="true"===p.attr("data-loop"),u=p.attr("data-thumb-height")?parseInt(p.attr("data-thumb-height"))+10:90,f=p.attr("data-transparency")?p.attr("data-transparency"):.5,m=(t("#wpadminbar").length>0?t("#wpadminbar").height():0,p.attr("data-ls-min")?parseInt(p.attr("data-ls-min")):0),v=p.attr("data-ls-max")?parseInt(p.attr("data-ls-max")):100,_=p.attr("data-ls-fill-dt")?p.attr("data-ls-fill-dt"):"fill",w=p.attr("data-ls-fill-mob")?p.attr("data-ls-fill-mob"):"fit",y=p.attr("data-pt-min")?parseInt(p.attr("data-pt-min")):0,b=p.attr("data-pt-max")?parseInt(p.attr("data-pt-max")):100,k=p.attr("data-pt-fill-dt")?p.attr("data-pt-fill-dt"):"fill",C=p.attr("data-pt-fill-mob")?p.attr("data-pt-fill-mob"):"fit",P=p.attr("data-padding-side")?parseInt(p.attr("data-padding-side")):0;v<=0&&(v=100),b<=0&&(b=100),v<v&&(v=v),b<b&&(b=b),l.addClass("ts-ls-"+_).addClass("ts-ls-mob-"+w),l.addClass("ts-pt-"+k).addClass("ts-pt-mob-"+C),l.find(".ts-slide-img").css({opacity:f}),l.find(".video-icon").css({opacity:f});var $=p.attr("data-padding-top")&&d>760?p.attr("data-padding-top"):0,x=p.attr("data-padding-bottom")&&d>760?p.attr("data-padding-bottom"):0,S=l.find(".ts-viewport");S.css({"margin-top":$+"px","margin-bottom":x+"px"}),o.on("debouncedresize",function(){$=p.attr("data-padding-top")&&o.width()>760?p.attr("data-padding-top"):0,x=p.attr("data-padding-bottom")&&o.width()>760?p.attr("data-padding-bottom"):0,o.width()>760?S.css({"margin-top":$+"px","margin-bottom":x+"px"}):S.css({"margin-top":"0px","margin-bottom":"0px"})});var I=l.thePhotoSlider({mode:{type:"centered",lsMinW:m,lsMaxW:v,ptMinW:y,ptMaxW:b},height:function(){var e=o.height(),i=t("#wpadminbar").height();if(t(".mixed-header").length>0)var a=t(".mixed-header").height();else var a=t(".masthead").height();return s.hasClass("transparent")||l.parents(".photo-scroller").hasClass("full-screen")?window.innerWidth<dtLocal.themeSettings.mobileHeader.secondSwitchPoint?e-$-x-a-i:e-$-x-i:t(".mixed-header").length>0||l.parents(".photo-scroller").hasClass("full-screen")?window.innerWidth<dtLocal.themeSettings.mobileHeader.firstSwitchPoint?e-$-x-a-i:t(".side-header-h-stroke").length>0?e-$-x-a-i:e-$-x-i:t(".side-header").length>0||l.parents(".photo-scroller").hasClass("full-screen")?window.innerWidth<dtLocal.themeSettings.mobileHeader.firstSwitchPoint?e-$-x-a-i:e-$-x-i:window.innerWidth<dtLocal.themeSettings.mobileHeader.firstSwitchPoint?e-$-x-a-i:e-$-x-a-i},sidePaddings:P,autoPlay:{enabled:c,delay:h,loop:g}}).data("thePhotoSlider"),j=t('<div class="ts-wrap"><div class="ts-viewport"><div class="ts-cont ts-thumbs">'+n+"</div></div></div>");l.after(j);var T=j.thePhotoSlider({mode:{type:"scroller"},height:u}).data("thePhotoSlider");t(".prev",z).click(function(){I.noSlide||I.slidePrev()}),t(".next",z).click(function(){I.noSlide||I.slideNext()}),I.ev.on("updateNav sliderReady",function(){I.lockRight?t(".next",$elParent).addClass("disabled"):t(".next",$elParent).removeClass("disabled"),I.lockLeft?t(".prev",$elParent).addClass("disabled"):t(".prev",$elParent).removeClass("disabled")}),window.addEventListener("keydown",e,!1),I.ev.on("sliderReady beforeTransition",function(){I.slides.$items.removeClass("act"),I.slides.$items.eq(I.currSlide).addClass("act"),T.slides.$items.removeClass("act"),T.slides.$items.eq(I.currSlide).addClass("act"),I.slides.$items.eq(I.currSlide).hasClass("ts-video")?I.slides.$items.parents(".ts-wrap ").addClass("hide-slider-overlay"):I.slides.$items.eq(I.currSlide).find(".ps-link").length>0?I.slides.$items.parents(".ts-wrap ").addClass("hide-slider-overlay"):I.slides.$items.parents(".ts-wrap ").removeClass("hide-slider-overlay");var e=I.slides.$items.eq(I.currSlide).find("figcaption").attr("class");t(".slide-caption > figcaption").removeClass("actCaption"),t(".slide-caption > ."+e).addClass("actCaption")}),I.ev.on("afterTransition",function(){var t=-T._unifiedX(),e=t+T.wrap.width,a=-T.slides.position[I.currSlide],s=a+T.slides.width[I.currSlide];if(a-=50,s+=50,a<t)for(i=T.currSlide;i>=0;i--){a+=50,s-=50;var o=-T.slides.position[i],r=o+T.wrap.width;if(s>r){T.slideTo(i+1);break}0===i&&T.slideTo(0)}else s>e&&T.slideTo(I.currSlide)}),j.addClass("scroller-thumbnails"),T.slides.$items.each(function(e){t(this).on("click",function(i){var a=t(this);a.parents(".ts-wrap").hasClass("ts-interceptClicks")||I.slideTo(e)})}),t(".scroller-thumbnails").layzrInitialisation(),I.slides.$items.each(function(e){t(this).on("click",function(i){var a=t(this);a.parents(".ts-wrap").hasClass("ts-interceptClicks")||I.slideTo(e)})});var z=l.parents(".photo-scroller");I.st.autoPlay.enabled&&t(".auto-play-btn",z).addClass("paused"),t(".auto-play-btn",z).on("click",function(e){e.preventDefault();var i=t(this);i.hasClass("paused")?(i.removeClass("paused"),I.noSlide||I.pause(),I.st.autoPlay.enabled=!1):(i.addClass("paused"),I.noSlide||I.play(),I.st.autoPlay.enabled=!0)})},t(".photoSlider").photoSlider(),t(".photoSlider").parents(".photo-scroller").css("visibility","visible"),dtGlobals.isWindowsPhone||(t(".full-screen-btn").each(function(){var e=t(this),i=e.parents(".photo-scroller");document.addEventListener("fullscreenchange",function(){document.fullscreen||(e.removeClass("act"),i.removeClass("full-screen"),t("body, html").css("overflow",""))},!1),document.addEventListener("mozfullscreenchange",function(){document.mozFullScreen||(e.removeClass("act"),i.removeClass("full-screen"),t("body, html").css("overflow",""))},!1),document.addEventListener("webkitfullscreenchange",function(){if(!document.webkitIsFullScreen){e.removeClass("act"),i.removeClass("full-screen"),t("body, html").css("overflow","");var a=$frame.data("thePhotoSlider");"undefined"!=typeof a&&a.update()}},!1)}),t(".full-screen-btn").on("click",function(i){i.preventDefault();var s=t(this),o=s.parents(".photo-scroller"),r=o.find(".ts-wrap");o.find(".scroller-thumbnails").data("thePhotoSlider"),r.data("thePhotoSlider");s.parents(".photo-scroller").find("figure").animate({opacity:0},150),s.hasClass("act")?(s.removeClass("act"),a(),o.removeClass("full-screen"),setTimeout(function(){s.parents(".photo-scroller").find("figure").delay(600).animate({opacity:1},300)},300)):(s.addClass("act"),o.addClass("full-screen"),e(document.documentElement),t("body, html").css("overflow","hidden"),setTimeout(function(){s.parents(".photo-scroller").find("figure").delay(600).animate({opacity:1},300)},300));var n=r.data("thePhotoSlider");"undefined"!=typeof n&&n.update()})),d.each(function(){var e=t(this);t(".btn-cntr, .slide-caption",e).css({bottom:parseInt(e.attr("data-thumb-height"))+15}),e.hasClass("hide-thumbs")&&(e.find(".hide-thumb-btn").addClass("act"),t(".scroller-thumbnails",e).css({bottom:-(parseInt(e.attr("data-thumb-height"))+20)}),t(".btn-cntr, .slide-caption",e).css({bottom:"5px"}))}),t(".hide-thumb-btn").on("click",function(e){e.preventDefault();var i=t(this),a=i.parents(".photo-scroller");i.hasClass("act")?(i.removeClass("act"),a.removeClass("hide-thumbs"),t(".scroller-thumbnails",a).css({bottom:0}),t(".btn-cntr, .slide-caption",a).css({bottom:parseInt(a.attr("data-thumb-height"))+15})):(i.addClass("act"),a.addClass("hide-thumbs"),t(".scroller-thumbnails",a).css({bottom:-(parseInt(a.attr("data-thumb-height"))+20)}),t(".btn-cntr, .slide-caption",a).css({bottom:"5px"}))})),t(".rsHomePorthole").exists()){var p={};p.container=t("#main-slideshow"),p.hendheld=!!(o.width()<740&&dtGlobals.isMobile),t("#main-slideshow-content").appendTo(p.container),t.fn.portholeScroller=function(){var e=t(this),i={},a="";i.$items=e.children("li"),i.count=i.$items.length,i.$items.each(function(e){var i=t(this),s=i,o=s.children("img"),r=o.attr("data-rstmb"),n=(o.attr("data-src"),o.attr("data-srcset"),o.attr("class"));if(o.hasClass("lazy-load"))var l="layzr-bg";else var l="";a=a+'<div class="ps-thumb-img '+l+'"><img class=" '+n+'" src="'+r+'"  width="150" height="150"></div>'}),e.addClass("ts-cont"),e.wrap('<div class="ts-wrap"><div class="ts-viewport portholeSlider-wrap"></div></div>');var s=e.parents(".ts-wrap"),r=e.parents("#main-slideshow"),n=(o.width(),r.attr("data-padding-side")?parseInt(r.attr("data-padding-side")):0,!("true"==r.attr("data-paused")||"undefined"==typeof r.attr("data-autoslide")||o.width()<740&&dtGlobals.isMobile)),l=r.attr("data-autoslide")&&parseInt(r.attr("data-autoslide"))>999?parseInt(r.attr("data-autoslide")):5e3,d="undefined"!=typeof r.attr("data-autoslide"),p=r.attr("data-width")?parseInt(r.attr("data-width")):800,c=r.attr("data-height")?parseInt(r.attr("data-height")):400,h=r.attr("data-scale")?r.attr("data-scale"):"none",g=s.thePhotoSlider({mode:{type:"slider"},height:c,width:p,resizeImg:!0,imageScaleMode:h,imageAlignCenter:!0,autoPlay:{enabled:n,delay:l,loop:d}}).data("thePhotoSlider"),u=t('<div class="psThumbs"><div class="psThumbsContainer">'+a+"</div></div>");s.append(u);var f=t(".ps-thumb-img ");f.each(function(e){t(this).on("click",function(i){t(this);g.slideTo(e)})}),t(".psThumbsContainer").after('<div class="progress-wrapper"><div class="progress-controls"></div></div>'),$progressWrap=t(".psThumbsContainer").next(),$progressHtml='<div class="progress-mask"><div class="progress-spinner-left" style="animation-duration: '+l+'ms;"></div></div><div class="progress-mask"><div class="progress-spinner-right" style="animation-duration: '+l+'ms;"></div></div>',g.st.autoPlay.enabled&&$progressWrap.find(".progress-mask").length<1&&$progressWrap.prepend($progressHtml),g.ev.on("autoPlayPlay",function(){$progressWrap.find(".progress-mask").length<1&&$progressWrap.prepend($progressHtml),$progressWrap.removeClass("paused")}),g.ev.on("autoPlayPause",function(){$progressWrap.find(".progress-mask").remove(),n||$progressWrap.addClass("paused")}),g.ev.on("sliderReady beforeTransition",function(){var e=40*-g.currSlide;0==e&&(e=20),f.removeClass("psNavSelected psNavPrev psNavNext psNavVis"),f.eq(g.currSlide).addClass("psNavSelected"),f.eq(g.currSlide).prev().addClass("psNavPrev"),f.eq(g.currSlide).next().addClass("psNavNext"),f.eq(g.currSlide).prev().prev().addClass("psNavVis"),f.eq(g.currSlide).next().next().addClass("psNavVis"),t(".psThumbsContainer").css({transform:"translateY("+e+"px)"})}),g.ev.on("sliderReady beforeTransition",function(){$progressWrap.addClass("blurred")}),g.ev.on("sliderReady afterTransition",function(){$progressWrap.removeClass("blurred")});var m;o.on("resize",function(){clearTimeout(m),m=setTimeout(function(){$progressWrap.removeClass("blurred")},200)}),t('<div class="leftArrow"></div><div class="rightArrow"></div>').insertAfter(e),t(".leftArrow",s).click(function(){g.noSlide||g.slidePrev()}),t(".rightArrow",s).click(function(){g.noSlide||g.slideNext()}),g.ev.on("updateNav sliderReady",function(){g.lockRight?t(".rightArrow",s).addClass("disabled"):t(".rightArrow",s).removeClass("disabled"),g.lockLeft?t(".leftArrow",s).addClass("disabled"):t(".leftArrow",s).removeClass("disabled"),g.lockRight&&g.lockLeft&&r.addClass("hide-arrows")}),"true"===r.attr("data-paused")&&$progressWrap.addClass("paused"),$progressWrap.on("click",function(e){e.preventDefault();var i=t(this);i.hasClass("paused")?(i.removeClass("paused"),$progressWrap.find(".progress-mask").length<1&&$progressWrap.prepend($progressHtml),g.noSlide||g.play(),g.st.autoPlay.enabled=!0):(i.addClass("paused"),g.noSlide||g.pause(),g.st.autoPlay.enabled=!1,$progressWrap.find(".progress-mask").remove())})},t(".rsHomePorthole").each(function(){t(this).portholeScroller()})}}),function(t){t.fn.collagePlus=function(e){function i(e,i,s,o){for(var r=s.padding*e.length+e.length*e[0][3],n=s.albumWidth-r,l=n/(i-r),d=r,p=i<s.albumWidth,c=0;c<e.length;c++){var h=t(e[c][0]),g=Math.floor(e[c][1]*l),u=Math.floor(e[c][2]*l),f=!!(c<e.length-1);s.allowPartialLastRow===!0&&p===!0&&(g=e[c][1],u=e[c][2]),d+=g;var m=h.is("img")?h:h.find("img").not(".blur-effect").first();m.width(g),h.is("img")||h.width(g+e[c][3]),m.height(u),h.is("img")||h.height(u+e[c][4]),s.allowPartialLastRow===!1&&p===!0?a(h,f,"none"):a(h,f,s.display)}}function a(t,e,i){var a={display:i,"vertical-align":"bottom",overflow:"hidden"};return t.css(a)}function s(e){$img=t(e);var i=new Array;return i.w=parseFloat($img.css("border-left-width"))+parseFloat($img.css("border-right-width")),i.h=parseFloat($img.css("border-top-width"))+parseFloat($img.css("border-bottom-width")),i}var o={targetHeight:400,albumWidth:this.width(),padding:parseFloat(this.css("padding-left")),images:this.children(),fadeSpeed:"fast",display:"inline-block",effect:"default",direction:"vertical",allowPartialLastRow:!1},r=t.extend({},o,e);return this.each(function(){var e=0,a=[],o=1;r.images.each(function(n){var l=t(this),d=l.is("img")?l:t(this).find("img").not(".blur-effect").first();if("undefined"!=d.attr("width")&&"undefined"!=d.attr("height"))var p="undefined"!=typeof d.data("width")?d.data("width"):d.attr("width"),c="undefined"!=typeof d.data("height")?d.data("height"):d.attr("height");else var p="undefined"!=typeof d.data("width")?d.data("width"):d.width(),c="undefined"!=typeof d.data("height")?d.data("height"):d.height();var h=s(d);d.data("width",p),d.data("height",c);var g=Math.ceil(p/c*r.targetHeight),u=Math.ceil(r.targetHeight);a.push([this,g,u,h.w,h.h]),e+=g+h.w+r.padding,e>r.albumWidth&&0!=a.length&&(i(a,e,r,o),delete e,delete a,e=0,a=[],o+=1),r.images.length-1==n&&0!=a.length&&(i(a,e,r,o),delete e,delete a,e=0,a=[],o+=1)}),t(this).trigger("jgDone")})};var e=0;t(".jg-container").each(function(){e++;var i=t(this),a=i.attr("data-padding");i.find(".wf-cell");i.attr("id","jg-container-"+e),t("<style type='text/css'> .content #jg-container-"+e+" .wf-cell{padding:"+a+";} .content #jg-container-"+e+".wf-container{margin:-"+a+";} .content .full-width-wrap #jg-container-"+e+".wf-container{margin-left:"+a+"; margin-right:"+a+"; margin-top:-"+a+"; margin-bottom:-"+a+";}</style>").insertAfter(i),i.on("jgDone",function(){new Layzr({selector:".jgrid-lazy-load",attr:"data-src",attrSrcSet:"data-srcset",retinaAttr:"data-src-retina",threshold:0,before:function(){this.setAttribute("sizes",this.width+"px")},callback:function(){this.classList.add("jgrid-layzr-loaded");var e=t(this);e.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(t){setTimeout(function(){e.parent().removeClass("layzr-bg")},200)})}})})}),t.fn.collage=function(e){return this.each(function(){var i=(t(this),t(this)),a=i.attr("data-padding"),s=i.find(".wf-cell"),o=parseFloat(s.first().css("padding-left"))+parseFloat(s.first().css("padding-right")),r=parseInt(i.attr("data-target-height")),n=!0;if("false"==i.attr("data-part-row")&&(n=!1),i.parent(".full-width-wrap").length)var l=i.parents(".full-width-wrap").width()-2*parseInt(a);else var l=i.parent().width()+2*parseInt(a);var d={albumWidth:l,targetHeight:r,padding:o,allowPartialLastRow:n,fadeSpeed:2e3,effect:"effect-1",direction:"vertical"};t.extend(d,e),dtGlobals.jGrid=d,i.collagePlus(d),i.css({width:l})})},t(window).on("debouncedresize",function(){t(".jg-container").not(".jgrid-shortcode").collage(),t(".jgrid-shortcode").each(function(){var e=t(this),i=e.data("visibleItems");i?e.collage({images:i}):e.collage()})}).trigger("debouncedresize")}(jQuery),function(t){function e(){var t=location.href;return hashtag=t.indexOf("#prettyPhoto")!==-1&&decodeURI(t.substring(t.indexOf("#prettyPhoto")+1,t.length)),hashtag&&(hashtag=hashtag.replace(/<|>/g,"")),hashtag}function i(){"undefined"!=typeof theRel&&(location.hash=theRel+"/"+rel_index+"/")}function a(){location.href.indexOf("#prettyPhoto")!==-1&&(location.hash="prettyPhoto")}function s(t,e){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i="[\\?&]"+t+"=([^&#]*)",a=new RegExp(i),s=a.exec(e);return null==s?"":s[1]}t.prettyPhoto={version:"3.1.6"},t.fn.prettyPhoto=function(o){function r(){t(".pp_loaderIcon").hide(),projectedTop=scroll_pos.scrollTop+(x/2-v.containerHeight/2),projectedTop<0&&(projectedTop=0),$ppt.fadeTo(settings.animation_speed,1),$pp_pic_holder.find(".pp_content").animate({height:v.contentHeight,width:v.contentWidth},settings.animation_speed),$pp_pic_holder.animate({top:projectedTop,left:S/2-v.containerWidth/2<0?0:S/2-v.containerWidth/2,width:v.containerWidth},settings.animation_speed,function(){$pp_pic_holder.find(".pp_hoverContainer,#fullResImage").height(v.height).width(v.width),$pp_pic_holder.find(".pp_fade").fadeIn(settings.animation_speed),isSet&&"image"==c(pp_images[set_position])?$pp_pic_holder.find(".pp_hoverContainer").show():$pp_pic_holder.find(".pp_hoverContainer").hide(),settings.allow_expand&&(v.resized?t("a.pp_expand,a.pp_contract").show():t("a.pp_expand").hide()),!settings.autoplay_slideshow||C||_||t.prettyPhoto.startSlideshow(),settings.changepicturecallback(),_=!0}),f(),o.ajaxcallback()}function n(e){$pp_pic_holder.find("#pp_full_res object,#pp_full_res embed").css("visibility","hidden"),$pp_pic_holder.find(".pp_fade").fadeOut(settings.animation_speed,function(){t(".pp_loaderIcon").show(),e()})}function l(e){e>1?t(".pp_nav").show():t(".pp_nav").hide()}function d(t,e){if(resized=!1,p(t,e),imageWidth=t,imageHeight=e,(k>S||b>x)&&doresize&&settings.allow_resize&&!$){for(resized=!0,fitting=!1;!fitting;)k>S?(imageWidth=S-200,imageHeight=e/t*imageWidth):b>x?(imageHeight=x-200,imageWidth=t/e*imageHeight):fitting=!0,b=imageHeight,k=imageWidth;(k>S||b>x)&&d(k,b),p(imageWidth,imageHeight)}return{width:Math.floor(imageWidth),height:Math.floor(imageHeight),containerHeight:Math.floor(b),containerWidth:Math.floor(k)+2*settings.horizontal_padding,contentHeight:Math.floor(w),contentWidth:Math.floor(y),resized:resized}}function p(e,i){e=parseFloat(e),i=parseFloat(i),$pp_details=$pp_pic_holder.find(".pp_details"),$pp_details.width(e),detailsHeight=parseFloat($pp_details.css("marginTop"))+parseFloat($pp_details.css("marginBottom")),$pp_details=$pp_details.clone().addClass(settings.theme).width(e).appendTo(t("body")).css({position:"absolute",top:-1e4}),detailsHeight+=$pp_details.height(),detailsHeight=detailsHeight<=34?36:detailsHeight,$pp_details.remove(),$pp_title=$pp_pic_holder.find(".ppt"),$pp_title.width(e),titleHeight=parseFloat($pp_title.css("marginTop"))+parseFloat($pp_title.css("marginBottom")),$pp_title=$pp_title.clone().appendTo(t("body")).css({position:"absolute",top:-1e4}),titleHeight+=$pp_title.height(),$pp_title.remove(),w=i+detailsHeight,y=e,b=w+titleHeight+$pp_pic_holder.find(".pp_top").height()+$pp_pic_holder.find(".pp_bottom").height(),k=e}function c(t){return t.match(/youtube\.com\/watch/i)||t.match(/youtu\.be/i)?"youtube":t.match(/vimeo\.com/i)?"vimeo":t.match(/\b.mov\b/i)?"quicktime":t.match(/\b.swf\b/i)?"flash":t.match(/\biframe=true\b/i)?"iframe":t.match(/\bajax=true\b/i)?"ajax":t.match(/\bcustom=true\b/i)?"custom":"#"==t.substr(0,1)?"inline":"image"}function h(){if(doresize&&"undefined"!=typeof $pp_pic_holder){if(scroll_pos=g(),contentHeight=$pp_pic_holder.height(),contentwidth=$pp_pic_holder.width(),projectedTop=x/2+scroll_pos.scrollTop-contentHeight/2,projectedTop<0&&(projectedTop=0),contentHeight>x)return;$pp_pic_holder.css({top:projectedTop,left:S/2+scroll_pos.scrollLeft-contentwidth/2})}}function g(){return self.pageYOffset?{scrollTop:self.pageYOffset,scrollLeft:self.pageXOffset}:document.documentElement&&document.documentElement.scrollTop?{scrollTop:document.documentElement.scrollTop,scrollLeft:document.documentElement.scrollLeft
}:document.body?{scrollTop:document.body.scrollTop,scrollLeft:document.body.scrollLeft}:void 0}function u(){x=t(window).height(),S=t(window).width(),"undefined"!=typeof $pp_overlay&&$pp_overlay.height(t(document).height()).width(S)}function f(){isSet&&settings.overlay_gallery&&"image"==c(pp_images[set_position])?(itemWidth=57,navWidth="facebook"==settings.theme||"pp_default"==settings.theme?50:30,itemsPerPage=Math.floor((v.containerWidth-100-navWidth)/itemWidth),itemsPerPage=itemsPerPage<pp_images.length?itemsPerPage:pp_images.length,totalPage=Math.ceil(pp_images.length/itemsPerPage)-1,0==totalPage?(navWidth=0,$pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").hide()):$pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").show(),galleryWidth=itemsPerPage*itemWidth,fullGalleryWidth=pp_images.length*itemWidth,$pp_gallery.css("margin-left",-(galleryWidth/2+navWidth/2)).find("div:first").width(galleryWidth+5).find("ul").width(fullGalleryWidth).find("li.selected").removeClass("selected"),goToPage=Math.floor(set_position/itemsPerPage)<totalPage?Math.floor(set_position/itemsPerPage):totalPage,t.prettyPhoto.changeGalleryPage(goToPage),$pp_gallery_li.filter(":eq("+set_position+")").addClass("selected")):$pp_pic_holder.find(".pp_content").unbind("mouseenter mouseleave")}function m(e){if(settings.social_tools&&(facebook_like_link=settings.social_tools.replace("{location_href}",encodeURIComponent(location.href))),settings.markup=settings.markup.replace("{pp_social}",""),t("body").append(settings.markup),$pp_pic_holder=t(".pp_pic_holder"),$ppt=t(".ppt"),$pp_overlay=t("div.pp_overlay"),isSet&&settings.overlay_gallery){currentGalleryPage=0,toInject="";for(var i=0;i<pp_images.length;i++)pp_images[i].match(/\b(jpg|jpeg|png|gif)\b/gi)?(classname="",img_src=pp_images[i]):(classname="default",img_src=""),toInject+="<li class='"+classname+"'><a href='#'><img src='"+img_src+"' width='50' alt='' /></a></li>";toInject=settings.gallery_markup.replace(/{gallery}/g,toInject),$pp_pic_holder.find("#pp_full_res").after(toInject),$pp_gallery=t(".pp_pic_holder .pp_gallery"),$pp_gallery_li=$pp_gallery.find("li"),$pp_gallery.find(".pp_arrow_next").click(function(){return t.prettyPhoto.changeGalleryPage("next"),t.prettyPhoto.stopSlideshow(),!1}),$pp_gallery.find(".pp_arrow_previous").click(function(){return t.prettyPhoto.changeGalleryPage("previous"),t.prettyPhoto.stopSlideshow(),!1}),$pp_pic_holder.find(".pp_content").hover(function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeIn()},function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeOut()}),itemWidth=57,$pp_gallery_li.each(function(e){t(this).find("a").click(function(){return t.prettyPhoto.changePage(e),t.prettyPhoto.stopSlideshow(),!1})})}settings.slideshow&&($pp_pic_holder.find(".pp_nav").prepend('<a href="#" class="pp_play">Play</a>'),$pp_pic_holder.find(".pp_nav .pp_play").click(function(){return t.prettyPhoto.startSlideshow(),!1})),$pp_pic_holder.attr("class","pp_pic_holder "+settings.theme),$pp_overlay.css({opacity:0,height:t(document).height(),width:t(window).width()}).bind("click",function(){settings.modal||t.prettyPhoto.close()}),t("a.pp_close").bind("click",function(){return t.prettyPhoto.close(),!1}),settings.allow_expand&&t("a.pp_expand").bind("click",function(e){return t(this).hasClass("pp_expand")?(t(this).removeClass("pp_expand").addClass("pp_contract"),doresize=!1):(t(this).removeClass("pp_contract").addClass("pp_expand"),doresize=!0),n(function(){t.prettyPhoto.open()}),!1}),$pp_pic_holder.find(".pp_previous, .pp_nav .pp_arrow_previous").bind("click",function(){return t.prettyPhoto.changePage("previous"),t.prettyPhoto.stopSlideshow(),!1}),$pp_pic_holder.find(".pp_next, .pp_nav .pp_arrow_next").bind("click",function(){return t.prettyPhoto.changePage("next"),t.prettyPhoto.stopSlideshow(),!1}),h()}o=jQuery.extend({hook:"rel",animation_speed:"fast",ajaxcallback:function(){},slideshow:5e3,autoplay_slideshow:!1,opacity:.8,show_title:!0,allow_resize:!0,allow_expand:!0,default_width:500,default_height:344,counter_separator_label:"/",theme:"pp_default",horizontal_padding:20,hideflash:!1,wmode:"opaque",autoplay:!0,modal:!1,deeplinking:!0,overlay_gallery:!0,overlay_gallery_max:30,keyboard_shortcuts:!0,changepicturecallback:function(){},callback:function(){},ie6_fallback:!0,markup:'<div class="pp_pic_holder"> \t\t\t\t\t\t<div class="ppt">&nbsp;</div> \t\t\t\t\t\t<div class="pp_top"> \t\t\t\t\t\t\t<div class="pp_left"></div> \t\t\t\t\t\t\t<div class="pp_middle"></div> \t\t\t\t\t\t\t<div class="pp_right"></div> \t\t\t\t\t\t</div> \t\t\t\t\t\t<div class="pp_content_container"> \t\t\t\t\t\t\t<div class="pp_left"> \t\t\t\t\t\t\t<div class="pp_right"> \t\t\t\t\t\t\t\t<div class="pp_content"> \t\t\t\t\t\t\t\t\t<div class="pp_loaderIcon"></div> \t\t\t\t\t\t\t\t\t<div class="pp_fade"> \t\t\t\t\t\t\t\t\t\t<a href="#" class="pp_expand" title="Expand the image">Expand</a> \t\t\t\t\t\t\t\t\t\t<div class="pp_hoverContainer"> \t\t\t\t\t\t\t\t\t\t\t<a class="pp_next" href="#">next</a> \t\t\t\t\t\t\t\t\t\t\t<a class="pp_previous" href="#">previous</a> \t\t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t\t\t<div id="pp_full_res"></div> \t\t\t\t\t\t\t\t\t\t<div class="pp_details"> \t\t\t\t\t\t\t\t\t\t\t<div class="pp_nav"> \t\t\t\t\t\t\t\t\t\t\t\t<a href="#" class="pp_arrow_previous">Previous</a> \t\t\t\t\t\t\t\t\t\t\t\t<p class="currentTextHolder">0/0</p> \t\t\t\t\t\t\t\t\t\t\t\t<a href="#" class="pp_arrow_next">Next</a> \t\t\t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t\t\t\t<p class="pp_description"></p> \t\t\t\t\t\t\t\t\t\t\t<div class="pp_social">{pp_social}</div> \t\t\t\t\t\t\t\t\t\t\t<a class="pp_close" href="#">Close</a> \t\t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t</div> \t\t\t\t\t\t</div> \t\t\t\t\t\t<div class="pp_bottom"> \t\t\t\t\t\t\t<div class="pp_left"></div> \t\t\t\t\t\t\t<div class="pp_middle"></div> \t\t\t\t\t\t\t<div class="pp_right"></div> \t\t\t\t\t\t</div> \t\t\t\t\t</div> \t\t\t\t\t<div class="pp_overlay"></div>',gallery_markup:'<div class="pp_gallery"> \t\t\t\t\t\t\t\t<a href="#" class="pp_arrow_previous">Previous</a> \t\t\t\t\t\t\t\t<div> \t\t\t\t\t\t\t\t\t<ul> \t\t\t\t\t\t\t\t\t\t{gallery} \t\t\t\t\t\t\t\t\t</ul> \t\t\t\t\t\t\t\t</div> \t\t\t\t\t\t\t\t<a href="#" class="pp_arrow_next">Next</a> \t\t\t\t\t\t\t</div>',image_markup:'<img id="fullResImage" src="{path}" />',flash_markup:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="{width}" height="{height}"><param name="wmode" value="{wmode}" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{path}" /><embed src="{path}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="{width}" height="{height}" wmode="{wmode}"></embed></object>',quicktime_markup:'<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" height="{height}" width="{width}"><param name="src" value="{path}"><param name="autoplay" value="{autoplay}"><param name="type" value="video/quicktime"><embed src="{path}" height="{height}" width="{width}" autoplay="{autoplay}" type="video/quicktime" pluginspage="http://www.apple.com/quicktime/download/"></embed></object>',iframe_markup:'<iframe src ="{path}" width="{width}" height="{height}" frameborder="no"></iframe>',inline_markup:'<div class="pp_inline">{content}</div>',custom_markup:"",social_tools:'<div class="twitter"><a href="http://twitter.com/share" class="twitter-share-button" data-count="none">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script></div><div class="facebook"><iframe src="//www.facebook.com/plugins/like.php?locale=en_US&href={location_href}&amp;layout=button_count&amp;show_faces=true&amp;width=500&amp;action=like&amp;font&amp;colorscheme=light&amp;height=23" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:500px; height:23px;" allowTransparency="true"></iframe></div>'},o);var v,_,w,y,b,k,C,P=this,$=!1,x=t(window).height(),S=t(window).width();return doresize=!0,scroll_pos=g(),t(window).unbind("resize.prettyphoto").bind("resize.prettyphoto",function(){h(),u()}),o.keyboard_shortcuts&&t(document).unbind("keydown.prettyphoto").bind("keydown.prettyphoto",function(e){if("undefined"!=typeof $pp_pic_holder&&$pp_pic_holder.is(":visible"))switch(e.keyCode){case 37:t.prettyPhoto.changePage("previous"),e.preventDefault();break;case 39:t.prettyPhoto.changePage("next"),e.preventDefault();break;case 27:settings.modal||t.prettyPhoto.close(),e.preventDefault()}}),t.prettyPhoto.initialize=function(){return settings=o,"pp_default"==settings.theme&&(settings.horizontal_padding=16),theRel=t(this).attr(settings.hook),galleryRegExp=/\[(?:.*)\]/,isSet=!!galleryRegExp.exec(theRel),pp_images=isSet?jQuery.map(P,function(e,i){if(t(e).attr(settings.hook).indexOf(theRel)!=-1)return t(e).attr("href")}):t.makeArray(t(this).attr("href")),pp_titles=isSet?jQuery.map(P,function(e,i){if(t(e).attr(settings.hook).indexOf(theRel)!=-1)return t(e).find("img").attr("alt")?t(e).find("img").attr("alt"):""}):t.makeArray(t(this).find("img").attr("alt")),pp_descriptions=isSet?jQuery.map(P,function(e,i){if(t(e).attr(settings.hook).indexOf(theRel)!=-1)return t(e).attr("title")?t(e).attr("title"):""}):t.makeArray(t(this).attr("title")),pp_images.length>settings.overlay_gallery_max&&(settings.overlay_gallery=!1),set_position=jQuery.inArray(t(this).attr("href"),pp_images),rel_index=isSet?set_position:t("a["+settings.hook+"^='"+theRel+"']").index(t(this)),m(this),settings.allow_resize&&t(window).bind("scroll.prettyphoto",function(){h()}),t.prettyPhoto.open(),!1},t.prettyPhoto.open=function(e){return"undefined"==typeof settings&&(settings=o,pp_images=t.makeArray(arguments[0]),pp_titles=arguments[1]?t.makeArray(arguments[1]):t.makeArray(""),pp_descriptions=arguments[2]?t.makeArray(arguments[2]):t.makeArray(""),isSet=pp_images.length>1,set_position=arguments[3]?arguments[3]:0,m(e.target)),settings.hideflash&&t("object,embed,iframe[src*=youtube],iframe[src*=vimeo]").css("visibility","hidden"),l(t(pp_images).size()),t(".pp_loaderIcon").show(),settings.deeplinking&&i(),settings.social_tools&&(facebook_like_link=settings.social_tools.replace("{location_href}",encodeURIComponent(location.href)),$pp_pic_holder.find(".pp_social").html(facebook_like_link)),$ppt.is(":hidden")&&$ppt.css("opacity",0).show(),$pp_overlay.show().fadeTo(settings.animation_speed,settings.opacity),$pp_pic_holder.find(".currentTextHolder").text(set_position+1+settings.counter_separator_label+t(pp_images).size()),"undefined"!=typeof pp_descriptions[set_position]&&""!=pp_descriptions[set_position]?$pp_pic_holder.find(".pp_description").show().html(unescape(pp_descriptions[set_position])):$pp_pic_holder.find(".pp_description").hide(),movie_width=parseFloat(s("width",pp_images[set_position]))?s("width",pp_images[set_position]):settings.default_width.toString(),movie_height=parseFloat(s("height",pp_images[set_position]))?s("height",pp_images[set_position]):settings.default_height.toString(),$=!1,movie_height.indexOf("%")!=-1&&(movie_height=parseFloat(t(window).height()*parseFloat(movie_height)/100-150),$=!0),movie_width.indexOf("%")!=-1&&(movie_width=parseFloat(t(window).width()*parseFloat(movie_width)/100-150),$=!0),$pp_pic_holder.fadeIn(function(){switch(settings.show_title&&""!=pp_titles[set_position]&&"undefined"!=typeof pp_titles[set_position]?$ppt.html(unescape(pp_titles[set_position])):$ppt.html("&nbsp;"),imgPreloader="",skipInjection=!1,c(pp_images[set_position])){case"image":imgPreloader=new Image,nextImage=new Image,isSet&&set_position<t(pp_images).size()-1&&(nextImage.src=pp_images[set_position+1]),prevImage=new Image,isSet&&pp_images[set_position-1]&&(prevImage.src=pp_images[set_position-1]),$pp_pic_holder.find("#pp_full_res")[0].innerHTML=settings.image_markup.replace(/{path}/g,pp_images[set_position]),imgPreloader.onload=function(){v=d(imgPreloader.width,imgPreloader.height),r()},imgPreloader.onerror=function(){alert("Image cannot be loaded. Make sure the path is correct and image exist."),t.prettyPhoto.close()},imgPreloader.src=pp_images[set_position];break;case"youtube":v=d(movie_width,movie_height),movie_id=s("v",pp_images[set_position]),""==movie_id&&(movie_id=pp_images[set_position].split("youtu.be/"),movie_id=movie_id[1],movie_id.indexOf("?")>0&&(movie_id=movie_id.substr(0,movie_id.indexOf("?"))),movie_id.indexOf("&")>0&&(movie_id=movie_id.substr(0,movie_id.indexOf("&")))),movie="http://www.youtube.com/embed/"+movie_id,s("rel",pp_images[set_position])?movie+="?rel="+s("rel",pp_images[set_position]):movie+="?rel=1",settings.autoplay&&(movie+="&autoplay=1"),toInject=settings.iframe_markup.replace(/{width}/g,v.width).replace(/{height}/g,v.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,movie);break;case"vimeo":v=d(movie_width,movie_height),movie_id=pp_images[set_position];var e=/http(s?):\/\/(www\.)?vimeo.com\/(\d+)/,i=movie_id.match(e);movie="http://player.vimeo.com/video/"+i[3]+"?title=0&amp;byline=0&amp;portrait=0",settings.autoplay&&(movie+="&autoplay=1;"),vimeo_width=v.width+"/embed/?moog_width="+v.width,toInject=settings.iframe_markup.replace(/{width}/g,vimeo_width).replace(/{height}/g,v.height).replace(/{path}/g,movie);break;case"quicktime":v=d(movie_width,movie_height),v.height+=15,v.contentHeight+=15,v.containerHeight+=15,toInject=settings.quicktime_markup.replace(/{width}/g,v.width).replace(/{height}/g,v.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,pp_images[set_position]).replace(/{autoplay}/g,settings.autoplay);break;case"flash":v=d(movie_width,movie_height),flash_vars=pp_images[set_position],flash_vars=flash_vars.substring(pp_images[set_position].indexOf("flashvars")+10,pp_images[set_position].length),filename=pp_images[set_position],filename=filename.substring(0,filename.indexOf("?")),toInject=settings.flash_markup.replace(/{width}/g,v.width).replace(/{height}/g,v.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,filename+"?"+flash_vars);break;case"iframe":v=d(movie_width,movie_height),frame_url=pp_images[set_position],frame_url=frame_url.substr(0,frame_url.indexOf("iframe")-1),toInject=settings.iframe_markup.replace(/{width}/g,v.width).replace(/{height}/g,v.height).replace(/{path}/g,frame_url);break;case"ajax":doresize=!1,v=d(movie_width,movie_height),doresize=!0,skipInjection=!0,t.get(pp_images[set_position],function(t){toInject=settings.inline_markup.replace(/{content}/g,t),$pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject,r()});break;case"custom":v=d(movie_width,movie_height),toInject=settings.custom_markup;break;case"inline":myClone=t(pp_images[set_position]).clone().append('<br clear="all" />').css({width:settings.default_width}).wrapInner('<div id="pp_full_res"><div class="pp_inline"></div></div>').appendTo(t("body")).show(),doresize=!1,v=d(t(myClone).width(),t(myClone).height()),doresize=!0,t(myClone).remove(),toInject=settings.inline_markup.replace(/{content}/g,t(pp_images[set_position]).html())}imgPreloader||skipInjection||($pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject,r())}),!1},t.prettyPhoto.changePage=function(e){currentGalleryPage=0,"previous"==e?(set_position--,set_position<0&&(set_position=t(pp_images).size()-1)):"next"==e?(set_position++,set_position>t(pp_images).size()-1&&(set_position=0)):set_position=e,rel_index=set_position,doresize||(doresize=!0),settings.allow_expand&&t(".pp_contract").removeClass("pp_contract").addClass("pp_expand"),n(function(){t.prettyPhoto.open()})},t.prettyPhoto.changeGalleryPage=function(t){"next"==t?(currentGalleryPage++,currentGalleryPage>totalPage&&(currentGalleryPage=0)):"previous"==t?(currentGalleryPage--,currentGalleryPage<0&&(currentGalleryPage=totalPage)):currentGalleryPage=t,slide_speed="next"==t||"previous"==t?settings.animation_speed:0,slide_to=currentGalleryPage*(itemsPerPage*itemWidth),$pp_gallery.find("ul").animate({left:-slide_to},slide_speed)},t.prettyPhoto.startSlideshow=function(){"undefined"==typeof C?($pp_pic_holder.find(".pp_play").unbind("click").removeClass("pp_play").addClass("pp_pause").click(function(){return t.prettyPhoto.stopSlideshow(),!1}),C=setInterval(t.prettyPhoto.startSlideshow,settings.slideshow)):t.prettyPhoto.changePage("next")},t.prettyPhoto.stopSlideshow=function(){$pp_pic_holder.find(".pp_pause").unbind("click").removeClass("pp_pause").addClass("pp_play").click(function(){return t.prettyPhoto.startSlideshow(),!1}),clearInterval(C),C=void 0},t.prettyPhoto.close=function(){$pp_overlay.is(":animated")||(t.prettyPhoto.stopSlideshow(),$pp_pic_holder.stop().find("object,embed").css("visibility","hidden"),t("div.pp_pic_holder,div.ppt,.pp_fade").fadeOut(settings.animation_speed,function(){t(this).remove()}),$pp_overlay.fadeOut(settings.animation_speed,function(){settings.hideflash&&t("object,embed,iframe[src*=youtube],iframe[src*=vimeo]").css("visibility","visible"),t(this).remove(),t(window).unbind("scroll.prettyphoto"),a(),settings.callback(),doresize=!0,_=!1,delete settings}))},!pp_alreadyInitialized&&e()&&(pp_alreadyInitialized=!0,hashIndex=e(),hashRel=hashIndex,hashIndex=hashIndex.substring(hashIndex.indexOf("/")+1,hashIndex.length-1),hashRel=hashRel.substring(0,hashRel.indexOf("/")),setTimeout(function(){t("a["+o.hook+"^='"+hashRel+"']:eq("+hashIndex+")").trigger("click")},50)),this.unbind("click.prettyphoto").bind("click.prettyphoto",t.prettyPhoto.initialize)}}(jQuery);var pp_alreadyInitialized=!1;
//# sourceMappingURL=foot.js.map
